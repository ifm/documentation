# This file is a template, and might need editing before it works on your project.
# This is a sample GitLab CI/CD configuration file that should run without any modifications.
# It demonstrates a basic 3 stage CI/CD pipeline. Instead of real tests or scripts,
# it uses echo commands to simulate the pipeline execution.
#
# A pipeline is composed of independent jobs that run scripts, grouped into stages.
# Stages run in sequential order, but jobs within stages run in parallel.
#
# For more information, see: https://docs.gitlab.com/ee/ci/yaml/README.html#stages

# Image that is used in markdown spellcheck examples:
# image: "registry.gitlab.com/pipeline-components/markdown-spellcheck:latest"

image: ubuntu:18.04


stages:          # List of stages for jobs, and their order of execution
  - build


markdown-spellcheck:
  stage: build
  tags: 
    - shared_docker
  when: always
  allow_failure: true
  before_script:
    - apt update
    - apt -y upgrade
    - apt -y install curl
    - curl -sL https://deb.nodesource.com/setup_6.x | bash -
    - apt -y install nodejs
    - apt -y install npm
    - npm i markdown-spellcheck -g
  script:
    - mdspell -a --en-us --report '**/*.md' > spellcheck-report.md
  artifacts:
    when: always
    paths:
      - spellcheck-report.md
    expire_in: 1 week


